<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>SkyScope</title>
    <link rel="stylesheet" href="/bootstrap-5.3.5-dist/css/bootstrap.min.css">
    <script src="/bootstrap-5.3.5-dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/searchBar.js"></script>
</head>
<body onload="searchBarLoaded();"
      style="background-image: url('//cdn.jsdelivr.net/npm/three-globe/example/img/night-sky.png');">
<header>
    <div id="searchBar"
         class="container align-content d-flex justify-content-center mt-2 rounded-5 bg-white position-relative">
        <form th:replace="~{searchBar}"></form>
    </div>
</header>
<main class="mt-5 container">
    <div class="row">
        <aside class="col-12 col-md-3 mb-4">
            <div class="card">
                <div class="card-header">
                    Találatok szűrése
                </div>
                <div class="card-body">
                    <h1> TODO SZŰRÉSEK </h1>
                </div>
            </div>
        </aside>

        <section class="col-12 col-md-9">
            <div class="row row-cols-1 row-cols-md-1 g-4">
                <div class="col" th:each="offer, i : ${results}">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="card-title container text-center">
                                <div class="row">
                                    <h5 class="card-title col"
                                        th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getDeparture().getIataCode()}"></h5>
                                    <h5 class="card-title col"
                                        th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getDuration()}"></h5>
                                    <h5 class="card-title col"
                                        th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getArrival().getIataCode()}"></h5>
                                </div>
                            </div>
                            <p class="card-text">Ár: <span th:text="${offer.price.total}"></span> HUF</p>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-primary mb-2" type="button" data-bs-toggle="collapse"
                                    th:attr="data-bs-target=${'#'+i.index}"
                                    aria-expanded="false" aria-controls="details">Részletek
                            </button>
                            <div class="collapse" th:attr="id=${i.index}">
                                <div class="card h-100 mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Induló járat</h5>
                                        <div class="card-text container text-center">
                                            <div class="row">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getDeparture().getIataCode()}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getDeparture().getAt()}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getArrival().getIataCode()}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().getFirst().getSegments().getFirst().getArrival().getAt()}">
                                            </div>
                                            <div class="row text-start">
                                                <h5>Utasok</h5>
                                            </div>
                                            <div class="row" th:each="traveller : ${offer.getTravelerPricings()}">
                                                <p class="col fs-6"
                                                   th:text="${traveller.getTravelerType()}"></p>
                                                <p class="col fs-6"
                                                   th:text="${traveller.getFareDetailsBySegment().getFirst().getCabin()}"></p>
                                                <p class="col fs-6"
                                                   th:text="${traveller.getPrice().getTotal()}"></p>
                                                <p class="col fs-6"
                                                   th:text="${traveller.getFareDetailsBySegment().getFirst().getIncludedCheckedBags().getQuantity() + ' poggyász'}"></p>
                                            </div>
                                            <div class="row text-start" th:if="${offer.getItineraries().size() != 1}">
                                                <h5>Visszaút</h5>
                                            </div>
                                            <div class="row" th:if="${offer.getItineraries().size() != 1}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().get(1).getSegments().getFirst().getDeparture().getIataCode()}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().get(1).getSegments().getFirst().getDeparture().getAt()}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().get(1).getSegments().getFirst().getArrival().getIataCode()}">
                                                <p class="col fs-6"
                                                   th:text="${offer.getItineraries().get(1).getSegments().getFirst().getArrival().getAt()}">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</main>
</body>
</html>